"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react");function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var a=t(e);class l{static KEY_COOKIES="CC_COOKIES";static KEY_HAS_DECIDED="CC_USER_HAS_DECIDED";static compareCookies(e,t){if(e.length!==t.length)return!1;const a=Object.keys(t[0]).filter((e=>"consent"!==e));for(const l of e){const e=t.find((e=>e.name===l.name));if(!e)return!1;for(const t of a)if(l[t]!==e[t])return!1}return!0}static mergeCookies(e,t){return e.filter((e=>{const a=t.find((t=>t.name===e.name));return a&&(e.consent=a.consent),e}))}}class n{static prefix="cc";static generatePrefixedClass(e,t){if(!t)return"";return`${this.prefix}__${e}${t}`}static changeCustomProperties(e){const t=Object.keys(e);for(const a of t){const t=`--cc-color-${a}`;document.documentElement.style.setProperty(t,e[a])}}static retrieveStorageItem(e){const t=localStorage.getItem(e);if(!t)return;return JSON.parse(t)}static setStorageItem(e,t){const a=JSON.stringify(t);localStorage.setItem(e,a)}static removeStorageItem(e){localStorage.removeItem(e)}}const c=e.createContext(null);c.displayName="CookieContext";const r=({children:t})=>{const[r,o]=e.useState([]),[i,s]=e.useState(!0),[u,d]=e.useState(!1),[m,f]=e.useState((()=>{})),E=e=>{e?n.setStorageItem(l.KEY_HAS_DECIDED,e):n.removeStorageItem(l.KEY_HAS_DECIDED),s(e),d(!1)},_=(e,t)=>{const a=r.map((a=>{const l=a.mandatory,n=e.length<1,c=e.includes(a.name);return l||!n&&!c||(a.consent=t),a}));o(a)};return e.useEffect((()=>{const e=n.retrieveStorageItem(l.KEY_HAS_DECIDED);E(!0===e)}),[]),a.default.createElement(c.Provider,{value:{cookies:r,hasDecided:i,modify:u,loadCookies:e=>{const t=n.retrieveStorageItem(l.KEY_COOKIES);if(Array.isArray(t))if(l.compareCookies(t,e))o(t);else{const a=l.mergeCookies(e,t);n.setStorageItem(l.KEY_COOKIES,a),o(a)}else o(e)},changeCookieConsent:_,saveChanges:e=>{switch(e){case"accept":_([],!0);break;case"decline":_([],!1)}n.setStorageItem(l.KEY_COOKIES,r),m(r),E(!0)},toggleModifyState:()=>{d((e=>!e))},disableConsentTemporarily:()=>{s(!0)},setSaveEventHandler:f}},t)};var o={DISABLED_TOOLTIP:"Notwendiger Cookie",TITLE:"Cookie-Richtline",PRIVACY_POLICY:"DatenschutzerklÃ¤rung",COOKIE_POLICY:"Cookie-Richtline",BUTTON_ACCEPT:"Akzeptieren",BUTTON_DECLINE:"Ablehnen",BUTTON_MODIFY:"Bearbeiten",THIRD_PARTY_PROVIDER:"Drittanbieter",OPT_OUT:"Cookies deaktivieren",ACCEPT_ALL:"Alle akzeptieren",DECLINE_ALL:"Alle ablehnen",SAVE_AND_CLOSE:"Sichern & schliessen"},i={DISABLED_TOOLTIP:"Necessary Cookie",TITLE:"cookie consent",PRIVACY_POLICY:"Privacy policy",COOKIE_POLICY:"Cookie policy",BUTTON_ACCEPT:"Accept",BUTTON_DECLINE:"Decline",BUTTON_MODIFY:"Modify",THIRD_PARTY_PROVIDER:"Third-party provider",OPT_OUT:"Disable cookies",ACCEPT_ALL:"Accept all",DECLINE_ALL:"Decline all",SAVE_AND_CLOSE:"Save & Close"};class s{static languageFiles={de:o,en:i};static language;static setLanguageFile(e){this.language=e}static translate(e){return this.languageFiles[this.language]?this.languageFiles[this.language][e]:e}}function u({language:t,cookies:a,colors:l,saveEventHandler:r}){const o=e.useContext(c);return e.useEffect((()=>{o&&r&&o.setSaveEventHandler((()=>r))}),[r]),e.useEffect((()=>{l&&n.changeCustomProperties(l)}),[l]),e.useEffect((()=>{o&&o.loadCookies(a)}),[a]),e.useEffect((()=>{s.setLanguageFile(t)}),[t]),null}function d({link:e,openNewTab:t=!0,children:l}){return a.default.createElement("a",{href:e,target:t?"_blank":"",rel:"noreferrer noopener nofollow"},l)}function m({small:e,children:t}){return a.default.createElement("p",{className:e?"sm":""},t)}function f({type:e,color:t,icon:l,onClick:c,children:r}){const o=n.generatePrefixedClass("btn--",t);return a.default.createElement("button",{className:`cc__btn cc__btn--${e} ${o}`,onClick:e=>{c&&c(e)}},l,r)}function E({thirdParty:e}){return a.default.createElement("div",{className:"cc__thirdpartylist__item"},a.default.createElement("h4",null,e.name),a.default.createElement(m,null,e.desc),a.default.createElement("div",{className:"links"},a.default.createElement(d,{link:e.privacyLink},a.default.createElement(f,{type:"tertiary"},s.translate("PRIVACY_POLICY"))),a.default.createElement(d,{link:e.optOutLink},a.default.createElement(f,{type:"tertiary"},s.translate("OPT_OUT")))))}function _({thirdParties:e}){return a.default.createElement("div",{className:"cc_list"},a.default.createElement("div",{className:"cc__thirdpartyheader"},a.default.createElement("h5",null,s.translate("THIRD_PARTY_PROVIDER"))),a.default.createElement("div",{className:"cc__thirdpartylist"},e.map((e=>a.default.createElement(E,{key:e.name,thirdParty:e})))))}m.defaultProps={small:!1},f.defaultProps={type:"primary"};const C=()=>a.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},a.default.createElement("path",{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"}));function k(){const t=e.useContext(c),l=e=>{t&&t.changeCookieConsent([],e)};return a.default.createElement(a.default.Fragment,null,a.default.createElement(f,{color:"accept",onClick:()=>l(!0)},s.translate("ACCEPT_ALL")),a.default.createElement(f,{color:"decline",onClick:()=>l(!1)},s.translate("DECLINE_ALL")),a.default.createElement(f,{color:"accent",icon:a.default.createElement(C,null),onClick:()=>{t&&t.saveChanges("close")}},s.translate("SAVE_AND_CLOSE")))}function g({checked:e,disabled:t,onClick:l}){const n=t?s.translate("DISABLED_TOOLTIP"):"";return a.default.createElement("div",{className:"cc__switch",title:n,onClick:()=>{l&&!t&&l()}},a.default.createElement("input",{type:"checkbox",checked:e,disabled:t,onChange:()=>{}}),a.default.createElement("span",null))}function p({cookie:t}){const l=e.useContext(c);return a.default.createElement("div",{className:"cc__cookielist__item"},a.default.createElement("h4",null,t.name),a.default.createElement("div",{className:"content"},a.default.createElement(m,null,t.desc),a.default.createElement(g,{checked:t.consent,disabled:t.mandatory,onClick:()=>{l&&l.changeCookieConsent([t.name],!t.consent)}})))}function v({cookies:t}){const[l,n]=e.useState(0),c=[...new Set(t.map((e=>e.group)))];return a.default.createElement("div",{className:"cc__list"},a.default.createElement("div",{className:"cc__cookieheader"},c.map(((e,t)=>a.default.createElement("h5",{key:e,className:"group "+(t===l?"active":""),onClick:()=>(e=>{n(e)})(t)},e)))),a.default.createElement("div",{className:"cc__cookielist"},t.filter((e=>e.group===c[l])).map((e=>a.default.createElement(p,{key:e.name,cookie:e})))))}function y({cookieLink:e,privacyLink:t,actionButtons:l}){return a.default.createElement("div",{className:"cc__btn__group"},a.default.createElement("div",{className:"secondary"},a.default.createElement(d,{link:t},a.default.createElement(f,{type:"tertiary"},s.translate("PRIVACY_POLICY"))),e&&a.default.createElement(d,{link:e},a.default.createElement(f,{type:"tertiary"},s.translate("COOKIE_POLICY")))),a.default.createElement("div",{className:"action"},l))}g.defaultProps={disabled:!1};const L=({onClick:e})=>a.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 352 512",onClick:()=>{e&&e()}},a.default.createElement("path",{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"}));function h({children:e}){return a.default.createElement("div",{className:"cc__title"},a.default.createElement("h3",null,e))}function I({name:t,preamble:l,thirdPartyProvider:n,privacyPolicyLink:r,cookiePolicyLink:o}){const i=e.useContext(c);if(i&&(i.hasDecided||!i.modify))return null;return a.default.createElement("div",{className:"cc__container cc__container--modify"},a.default.createElement("div",{className:"wrapper"},a.default.createElement(L,{onClick:()=>{i&&i.toggleModifyState()}}),a.default.createElement(h,null,t," ",s.translate("TITLE")),a.default.createElement(m,null,l),a.default.createElement("div",{className:"cc__scroller cc__scroller--max"},i&&i.cookies.length>0&&a.default.createElement(v,{cookies:i.cookies}),n.length>0&&a.default.createElement(_,{thirdParties:n})),a.default.createElement(y,{privacyLink:r,cookieLink:o,actionButtons:a.default.createElement(k,null)})))}const P=()=>a.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},a.default.createElement("path",{d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"}));function O(){const t=e.useContext(c),l=e=>{t&&t.saveChanges(e)};return a.default.createElement(a.default.Fragment,null,a.default.createElement(f,{color:"accept",icon:a.default.createElement(C,null),onClick:()=>l("accept")},s.translate("BUTTON_ACCEPT")),a.default.createElement(f,{color:"decline",icon:a.default.createElement(L,null),onClick:()=>l("decline")},s.translate("BUTTON_DECLINE")),a.default.createElement(f,{color:"secondary",icon:a.default.createElement(P,null),onClick:()=>{t&&t.toggleModifyState()}},s.translate("BUTTON_MODIFY")))}function T({name:t,preamble:l,privacyPolicyLink:n,cookiePolicyLink:r}){const o=e.useContext(c);if(o&&(o.hasDecided||o.modify))return null;return a.default.createElement("div",{className:"cc__container cc__container--small"},a.default.createElement("div",null,a.default.createElement(L,{onClick:()=>{o&&o.disableConsentTemporarily()}}),a.default.createElement(h,null,t," ",s.translate("TITLE")),a.default.createElement(m,null,l),a.default.createElement(y,{privacyLink:n,cookieLink:r,actionButtons:a.default.createElement(O,null)})))}exports.CookieConsent=function({name:e,activated:t=!0,language:l="en",preamble:n,privacyPolicyLink:c,cookiePolicyLink:o,cookies:i=[],thirdPartyProvider:s=[],onSave:d,colors:m}){return a.default.createElement(r,null,a.default.createElement(u,{language:l,cookies:i,colors:m,saveEventHandler:d}),a.default.createElement("div",{className:"cc__gimme-cookies"},a.default.createElement(T,{name:e,preamble:n,privacyPolicyLink:c,cookiePolicyLink:o}),a.default.createElement(I,{name:e,preamble:n,thirdPartyProvider:s,privacyPolicyLink:c,cookiePolicyLink:o})))};
//# sourceMappingURL=cookieConsent.js.map
